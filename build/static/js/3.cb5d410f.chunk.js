(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{667:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=667},676:function(t,e){},677:function(t,e){},678:function(t,e){},679:function(t,e){},680:function(t,e){},742:function(t,e,a){"use strict";var n=a(24);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a(0)),r=(0,n(a(47)).default)(o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),o.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ArrowBackIos");e.default=r},743:function(t,e,a){"use strict";var n=a(24);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a(0)),r=(0,n(a(47)).default)(o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{d:"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z"}),o.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ArrowForwardIos");e.default=r},747:function(t,e,a){"use strict";a.r(e);var n=a(25),o=a(26),r=a(30),i=a(29),s=a(31),c=a(27),u=a(0),l=a.n(u),d=a(48),p=a(5),m=a.n(p),f=a(180),h=a.n(f),g=a(674),v=a.n(g),b=a(181),w=a.n(b),y=a(688),E=a.n(y),C=a(71),S=a.n(C),k=a(57),O=a.n(k),V=a(35),j=a.n(V),x=a(126),N=a.n(x),P=a(691),L=a.n(P),_=a(742),I=a.n(_),A=a(743),D=a.n(A),M=a(692),R=a.n(M),T=a(689),W=a.n(T),z=a(690),B=a.n(z),F=a(687),J=a.n(F),U=a(182),H=a.n(U),G=a(750),K=a(669),q=a(178),Q=a.n(q),X=a(686),Y=a.n(X),Z=a(33),$=a(23),tt=function(t){function e(){return Object(n.a)(this,e),Object(r.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return l.a.createElement("div",{style:{width:"80%",marginLeft:"50px",marginBottom:"15px"}},l.a.createElement(S.a,{"aria-label":"Recipe",style:{float:"left"}},this.props.username.charAt(0)," "),l.a.createElement("div",{style:{marginLeft:"10px",paddingLeft:"45px"}},l.a.createElement(j.a,{style:{fontSize:14},component:"h2"},this.props.username),l.a.createElement(j.a,{style:{fontSize:12},color:"textSecondary",gutterBottom:!0},this.props.body)))}}]),e}(u.Component),et=a(167),at=a.n(et),nt=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(i.a)(e).call(this,t))).state={new_comment_body:""},a}return Object(s.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this;return l.a.createElement("div",{style:{width:"80%",marginLeft:"30px",marginBottom:"15px"}},l.a.createElement("div",{style:{marginLeft:"10px",paddingLeft:"45px"}},l.a.createElement(at.a,{id:"standard-search",label:"Type your comment",type:"search",margin:"normal",value:this.state.new_comment_body,onChange:function(e){t.setState({new_comment_body:e.target.value})},onKeyDown:function(e){13===e.keyCode&&(t.setState({new_comment_body:""}),t.props.submit(t.state.new_comment_body))}})))}}]),e}(u.Component);K.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(K.pdfjs.version,"/pdf.worker.js");var ot=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(r.a)(this,Object(i.a)(e).call(this,t))).onDocumentLoadSuccess=function(t){var e=t.numPages;a.setState({numPages:e})},a.getPost=function(){var t=a.props.match.params.id;Z.a.find("posts",t,'filter={"include":"user"}').then(function(t){Z.a.findRelated("posts","topics",t.data.id).then(function(e){t.data.topics=e.data,a.setState({post:t.data})})}).catch(function(t){return console.log(t)})},a.upVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id});var e="where=".concat(JSON.stringify(t));t.upVote=!0,Z.a.create("votes/upsertWithWhere",t,e).then(function(t){a.setState({upvoted:!0,downvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})},a.deleteUpVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id}),t.upVote=!0,Z.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Z.a.destroy("votes",t.data[0].id).then(function(t){a.setState({upvoted:!1,downvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})}).catch(function(t){a.getVoteCount()})},a.deleteDownVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id,t.upVote=!1,Z.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Z.a.destroy("votes",t.data[0].id).then(function(t){a.setState({downvoted:!1,upvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})}).catch(function(t){a.getVoteCount()})})},a.downVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id;var o="where=".concat(JSON.stringify(t));t.upVote=!1,Z.a.create("votes/upsertWithWhere",t,o).then(function(t){a.setState({downvoted:!0,upvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})})},a.getVoteCount=function(){var t='filter={"where":{"postId":"'.concat(a.props.match.params.id,'"}}'),e=0;Z.a.find("votes",null,t).then(function(t){t.data.length||a.setState({voteCount:0}),t.data.map(function(t){t.upVote?e++:e--,a.setState({voteCount:e})})})},a.setVoteStatus=function(){var t=a.props.match.params.id;$.a.getAuth(function(e,n){if(!n)return window.location.reload();var o=n.user.id,r='filter={"where":{"userId":"'.concat(o,'","postId":"').concat(t,'"}}');Z.a.find("votes",null,r).then(function(t){t.data.length&&t.data[0]&&a.setState({upvoted:t.data[0].upVote,downvoted:!t.data[0].upVote})}).catch(function(t){return console.log(t)})})},a.saveToFavorite=function(){a.setState(function(t){return{favorited:!t.favorited}})},a.topicClicked=function(t){a.props.changeTitle(t),a.props.history.push("/"+t),a.props.onClick(t)},a.increasePageNumber=function(){a.setState(function(t){return{pageNumber:t.pageNumber+1<=t.numPages?t.pageNumber+1:t.numPages}})},a.decreasePageNumber=function(){a.setState(function(t){return{pageNumber:t.pageNumber-1>=1?t.pageNumber-1:1}})},a.onCommentSubmit=function(t){$.a.getAuth(function(e,n){if(!n)return window.location.reload();var o={body:t,username:n.user.firstname},r=a.state.comments;r.push(o),a.setState({comments:r})})},a.handlePostClick=function(){},a.state={post:{},voteCount:0,upvoted:!1,downvoted:!1,numPages:null,pageNumber:1,comments:[],favorited:!1},a}return Object(s.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.getPost(),this.getVoteCount(),this.setVoteStatus()}},{key:"render",value:function(){var t=this,e=this.props.classes,a=this.state,n=a.pageNumber,o=a.numPages;return l.a.createElement("div",{style:{alignContent:"center",alignItems:"center",justifyContent:"center",display:"flex",marginTop:"5%",marginBottom:"5%"}},l.a.createElement(h.a,{className:e.card},l.a.createElement(v.a,{avatar:l.a.createElement(S.a,{"aria-label":"Recipe",className:e.avatar},this.state.post&&this.state.post.user?this.state.post.user.firstname[0]:""),action:l.a.createElement(O.a,null,l.a.createElement(Q.a,null)),title:this.state.post.title?this.state.post.title:"",subheader:Y()(this.state.post?this.state.post.createdAt:"").format("HH:mm on MMM DD")+" by "+(this.state.post&&this.state.post.user?this.state.post.user.firstname:"")}),l.a.createElement(K.Document,{file:this.state.post?this.state.post.file:"",onLoadSuccess:this.onDocumentLoadSuccess},l.a.createElement(K.Page,{pageNumber:n,onClick:this.props.onClick})),l.a.createElement("p",{style:{float:"right",paddingRight:"100px"}},l.a.createElement(I.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:this.decreasePageNumber}),l.a.createElement(D.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:this.increasePageNumber}),l.a.createElement("br",null),"Page ",n," of ",o),l.a.createElement("br",null),l.a.createElement(w.a,{style:{marginTop:"10px"}},l.a.createElement(j.a,{component:"p"},this.state.post?this.state.post.description:""),l.a.createElement(H.a,{variant:"middle",className:e.divider}),l.a.createElement("br",null),this.state.post&&this.state.post.topic?this.state.post.topic.map(function(a,n){return l.a.createElement(J.a,{className:e.chip,key:a.id,label:a.name,color:"primary",variant:"outlined",onClick:function(){return t.topicClicked(a.name)}})}):""),l.a.createElement(E.a,{className:e.actions,disableActionSpacing:!0},l.a.createElement(O.a,{"aria-label":"vote count"},this.state.voteCount),l.a.createElement(O.a,{"aria-label":"Up vote ",onClick:this.state.upvoted?this.deleteUpVote:this.upVote,color:this.state.upvoted?"secondary":"inherit"},l.a.createElement(W.a,null)),l.a.createElement(O.a,{"aria-label":"Down vote ",onClick:this.state.downvoted?this.deleteDownVote:this.downVote,color:this.state.downvoted?"secondary":"inherit"},l.a.createElement(B.a,null)),l.a.createElement(O.a,{"aria-label":"Add to favorites",color:this.state.favorited?"secondary":"inherit",onClick:this.saveToFavorite},l.a.createElement(L.a,null)),l.a.createElement(O.a,{"aria-label":"Share"},l.a.createElement(R.a,null)),l.a.createElement(O.a,{className:m()(e.expand,Object(c.a)({},e.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"})),l.a.createElement("div",{style:{padding:"10px",backgroundColor:"rgba(0, 0, 0, 0.1)"}},l.a.createElement(nt,{submit:this.onCommentSubmit}),this.state.comments.map(function(t,e){return l.a.createElement(tt,{key:e,username:t.username,body:t.body})}))))}}]),e}(l.a.Component);e.default=Object(G.a)(Object(d.withStyles)(function(t){return{card:{minWidth:800,maxWidth:800},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:Object(c.a)({transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),marginLeft:"auto"},t.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:N.a[500]},chip:{marginRight:t.spacing.unit},divider:{marginTop:t.spacing.unit,marginBottom:t.spacing.unit,marginRight:t.spacing.unit}}})(ot))}}]);
//# sourceMappingURL=3.cb5d410f.chunk.js.map