(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{667:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=667},676:function(t,e){},677:function(t,e){},678:function(t,e){},679:function(t,e){},680:function(t,e){},747:function(t,e,n){"use strict";n.r(e);var a=n(25),o=n(26),i=n(30),r=n(29),c=n(31),s=n(0),u=n.n(s),l=n(27),p=n(48),d=n(5),h=n.n(d),f=n(180),m=n.n(f),b=n(674),v=n.n(b),g=n(181),w=n.n(g),E=n(688),y=n.n(E),S=n(77),k=n.n(S),C=n(57),O=n.n(C),j=n(35),V=n.n(j),x=n(126),I=n.n(x),N=n(691),T=n.n(N),D=n(692),A=n.n(D),W=n(689),P=n.n(W),R=n(690),U=n.n(R),H=n(687),J=n.n(H),q=n(182),M=n.n(q),L=n(751),B=n(178),F=n.n(B),_=(n(693),n(695)),G=n.n(_),z=n(669);z.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(z.pdfjs.version,"/pdf.worker.js");var K=function(t){function e(){var t,n;Object(a.a)(this,e);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(i.a)(this,(t=Object(r.a)(e)).call.apply(t,[this].concat(c)))).state={numPages:null,pageNumber:1},n.onDocumentLoadSuccess=function(t){var e=t.numPages;n.setState({numPages:e})},n.handlePdfClick=function(t){t.numPages},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.state,e=t.pageNumber,n=t.numPages;return u.a.createElement("div",null,u.a.createElement(G.a,{style:{height:"300px",top:"10%",left:"10%"}},u.a.createElement(z.Document,{file:this.props.file,onLoadSuccess:this.onDocumentLoadSuccess},u.a.createElement(z.Page,{pageNumber:e,onClick:this.props.onClick}))),u.a.createElement("p",{style:{float:"right",paddingRight:"50px"}},"Page ",e," of ",n))}}]),e}(s.Component),Q=n(686),X=n.n(Q),Y=n(33),Z=n(23),$=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(i.a)(this,Object(r.a)(e).call(this,t))).handleExpandClick=function(){n.setState(function(t){return{expanded:!t.expanded}})},n.upVote=function(){var t={postId:n.props.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id});var e="where=".concat(JSON.stringify(t));t.upVote=!0,Y.a.create("votes/upsertWithWhere",t,e).then(function(t){n.setState({upvoted:!0,downvoted:!1}),n.getVoteCount()}).catch(function(t){n.getVoteCount()})},n.deleteUpVote=function(){var t={postId:n.props.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id}),t.upVote=!0,Y.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Y.a.destroy("votes",t.data[0].id).then(function(t){n.setState({upvoted:!1,downvoted:!1}),n.getVoteCount()}).catch(function(t){n.getVoteCount()})}).catch(function(t){n.getVoteCount()})},n.deleteDownVote=function(){var t={postId:n.props.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id}),t.upVote=!1,Y.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Y.a.destroy("votes",t.data[0].id).then(function(t){n.setState({downvoted:!1,upvoted:!1}),n.getVoteCount()}).catch(function(t){n.getVoteCount()})}).catch(function(t){n.getVoteCount()})},n.downVote=function(){var t={postId:n.props.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id});var e="where=".concat(JSON.stringify(t));t.upVote=!1,Y.a.create("votes/upsertWithWhere",t,e).then(function(t){n.setState({downvoted:!0,upvoted:!1}),n.getVoteCount()}).catch(function(t){n.getVoteCount()})},n.getVoteCount=function(){var t='filter={"where":{"postId":"'.concat(n.props.id,'"}}'),e=0;Y.a.find("votes",null,t).then(function(t){t.data.length||n.setState({voteCount:0}),t.data.map(function(t){t.upVote?e++:e--,n.setState({voteCount:e})})})},n.setVoteStatus=function(){var t=n.props.id;Z.a.getAuth(function(e,a){if(!a)return window.location.reload();var o=a.user.id,i='filter={"where":{"userId":"'.concat(o,'","postId":"').concat(t,'"}}');Y.a.find("votes",null,i).then(function(t){t.data.length&&t.data[0]&&n.setState({upvoted:t.data[0].upVote,downvoted:!t.data[0].upVote})}).catch(function(t){return console.log(t)})})},n.saveToFavorite=function(){n.setState(function(t){return{favorited:!t.favorited}})},n.topicClicked=function(t){n.props.changeTitle(t),n.props.history.push("/"+t)},n.handlePostClick=function(){},n.state={expanded:!1,title:n.props.title,voteCount:0,upvoted:!1,downvoted:!1,favorited:!1,subheader:X()(n.props.createdAt).format("HH:mm on MMM DD")+" by "+n.props.user.firstname,topics:n.props.topics},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.getVoteCount(),this.setVoteStatus()}},{key:"render",value:function(){var t=this,e=this.props.classes;return u.a.createElement(m.a,{className:e.card},u.a.createElement(v.a,{avatar:u.a.createElement(k.a,{"aria-label":"Recipe",className:e.avatar},this.props.user.firstname[0]),action:u.a.createElement(O.a,null,u.a.createElement(F.a,null)),title:this.state.title,subheader:this.state.subheader}),u.a.createElement(K,{file:this.props.file,onClick:this.props.onItemClick}),u.a.createElement(w.a,null,u.a.createElement(V.a,{component:"p"},this.props.description),u.a.createElement(M.a,{variant:"middle",className:e.divider}),u.a.createElement("br",null),this.state.topics.map(function(n,a){return u.a.createElement(J.a,{className:e.chip,key:n.id,label:n.name,color:"primary",variant:"outlined",onClick:function(){return t.topicClicked(n.name)}})})),u.a.createElement(y.a,{className:e.actions,disableActionSpacing:!0},u.a.createElement(O.a,{"aria-label":"vote count"},this.state.voteCount),u.a.createElement(O.a,{"aria-label":"Up vote ",onClick:this.state.upvoted?this.deleteUpVote:this.upVote,color:this.state.upvoted?"secondary":"inherit"},u.a.createElement(P.a,null)),u.a.createElement(O.a,{"aria-label":"Down vote ",onClick:this.state.downvoted?this.deleteDownVote:this.downVote,color:this.state.downvoted?"secondary":"inherit"},u.a.createElement(U.a,null)),u.a.createElement(O.a,{"aria-label":"Add to favorites",color:this.state.favorited?"secondary":"inherit",onClick:this.saveToFavorite},u.a.createElement(T.a,null)),u.a.createElement(O.a,{"aria-label":"Share"},u.a.createElement(A.a,null)),u.a.createElement(O.a,{className:h()(e.expand,Object(l.a)({},e.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"})))}}]),e}(u.a.Component),tt=Object(L.a)(Object(p.withStyles)(function(t){return{card:{minWidth:800,maxWidth:800},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:Object(l.a)({transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),marginLeft:"auto"},t.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:I.a[500]},chip:{marginRight:t.spacing.unit},divider:{marginTop:t.spacing.unit,marginBottom:t.spacing.unit,marginRight:t.spacing.unit}}})($)),et=n(51),nt=n.n(et),at=n(43),ot=function(t){function e(){var t,n;Object(a.a)(this,e);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(i.a)(this,(t=Object(r.a)(e)).call.apply(t,[this].concat(c)))).state={expanded:!1,topic:{},subscribed:!1},n.getTopic=function(){var t='filter={"where":{"name":"'.concat(n.props.topicTitle,'"}}');Y.a.find("topics",null,t).then(function(t){t.data.length&&n.setSubscriptionStatus(t.data[0]),n.setState({topic:t.data[0]})}).catch(function(t){return console.log(t)})},n.subscribe=function(){var t={topicId:n.state.topic.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id}),Y.a.create("subscriptions/upsertWithWhere",t,"where=".concat(JSON.stringify(t))).then(function(t){n.setState({subscribed:!0}),n.props.enqueueSnackbar("Subscribed to the topic Successfully!",{variant:"success"})}).catch(function(t){n.props.enqueueSnackbar("Unable to subscribe to topic, please try again!",{variant:"error"})})},n.unsubscribe=function(){var t={topicId:n.state.topic.id};Z.a.getAuth(function(e,n){if(!n)return window.location.reload();t.userId=n.user.id}),Y.a.find("subscriptions",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Y.a.destroy("subscriptions",t.data[0].id).then(function(t){n.setState({subscribed:!1}),n.props.enqueueSnackbar("Unsubscribed Successfully!",{variant:"success"})}).catch(function(t){n.props.enqueueSnackbar("Error, please try again!",{variant:"error"})})}).catch(function(t){n.props.enqueueSnackbar("Error, please try again!",{variant:"error"})})},n.setSubscriptionStatus=function(t){var e=t||n.state.topic;Z.a.getAuth(function(t,a){if(!a)return window.location.reload();var o=a.user.id,i='filter={"where":{"userId":"'.concat(o,'","topicId":"').concat(e.id,'"}}');Y.a.find("subscriptions",null,i).then(function(t){t.data.length&&n.setState({subscribed:!0})}).catch(function(t){return console.log(t)})})},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.getTopic()}},{key:"render",value:function(){var t=this.props.classes;return u.a.createElement(m.a,{className:t.card},u.a.createElement(v.a,{action:u.a.createElement(O.a,null,u.a.createElement(F.a,null)),title:this.props.topicTitle}),u.a.createElement(w.a,{style:{justifyContent:"center",alignItems:"center"}},u.a.createElement(V.a,{component:"p"},this.state.topic?this.state.topic.description:this.props.topicDesc),"Home"===this.props.topicTitle?"":u.a.createElement(nt.a,{style:{width:"100%"},variant:"contained",color:this.state.subscribed?"default":"primary",className:t.button,onClick:this.state.subscribed?this.unsubscribe:this.subscribe},this.state.subscribed?"UN":"","SUBSCRIBE")))}}]),e}(u.a.Component),it=Object(at.withSnackbar)(Object(p.withStyles)(function(t){return{card:{maxWidth:350,minWidth:280,float:"right",marginRight:"5%",marginTop:"2%"},actions:{display:"flex"},expand:Object(l.a)({transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),marginLeft:"auto"},t.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:I.a[500]}}})(ot));n.d(e,"default",function(){return rt});var rt=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(i.a)(this,Object(r.a)(e).call(this,t))).onClick=function(t,e){var a=t.length?t[0].name:"Other";n.props.history.push("/"+a+"/"+e)},n.getPosts=function(){var t=n.props.match.params.topic;Y.a.find("posts",null,'filter={"include":"user"}').then(function(e){var a=[];e.data.map(function(e,o){return Y.a.findRelated("posts","topics",e.id).then(function(o){e.topic=o.data,t?e.topic.map(function(n){return n.name===t?a.push(e):null}):a.push(e),n.setState({posts:a})})})}).catch(function(t){return console.log(t)})},n.state={open:!1,posts:[],topics:[],topicTitle:n.props.match.params.topic||"Home"},n}return Object(c.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.props.changeTitle(this.props.match.params.topic||"Home"),this.getPosts()}},{key:"render",value:function(){var t=this,e=this.state.posts;return console.log("Home"===this.state.topicTitle,this.state.topicTitle),u.a.createElement("div",null,u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(it,{topicTitle:this.props.match.params.topic||"Home",topicDesc:"Home"===this.state.topicTitle?"Welcome to myEdu community!":this.state.topicDescription}),u.a.createElement("div",{style:{width:"80%"}},e.map(function(e,n){return u.a.createElement("div",{key:n},u.a.createElement("br",null),u.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},u.a.createElement(tt,{changeTitle:t.props.changeTitle,enqueueSnackbar:t.props.enqueueSnackbar,onItemClick:function(){return t.onClick(e.topic,e.id)},key:e.id,id:e.id,user:e.user,title:e.title,description:e.description,file:e.file,topics:e.topic,createdAt:e.createdAt})))})),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null))}}]),e}(s.Component)}}]);
//# sourceMappingURL=2.dfc68a9e.chunk.js.map