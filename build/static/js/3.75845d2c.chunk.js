(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{667:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=667},676:function(t,e){},677:function(t,e){},678:function(t,e){},679:function(t,e){},680:function(t,e){},742:function(t,e,a){"use strict";var n=a(24);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a(0)),i=(0,n(a(47)).default)(o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),o.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ArrowBackIos");e.default=i},743:function(t,e,a){"use strict";var n=a(24);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a(0)),i=(0,n(a(47)).default)(o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{d:"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z"}),o.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"ArrowForwardIos");e.default=i},745:function(t,e,a){"use strict";a.r(e);var n=a(25),o=a(26),i=a(30),r=a(29),s=a(31),c=a(27),u=a(0),l=a.n(u),d=a(48),p=a(5),f=a.n(p),h=a(180),m=a.n(h),g=a(674),v=a.n(g),b=a(181),w=a.n(b),E=a(688),C=a.n(E),V=a(77),y=a.n(V),k=a(57),S=a.n(k),N=a(35),O=a.n(N),j=a(126),x=a.n(j),P=a(691),I=a.n(P),D=a(742),M=a.n(D),A=a(743),L=a.n(A),R=a(692),T=a.n(R),W=a(689),F=a.n(W),J=a(690),_=a.n(J),U=a(687),z=a.n(U),H=a(182),B=a.n(H),G=a(751),q=a(669),K=a(178),Q=a.n(K),X=a(686),Y=a.n(X),Z=a(33),$=a(23);q.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(q.pdfjs.version,"/pdf.worker.js");var tt=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(i.a)(this,Object(r.a)(e).call(this,t))).onDocumentLoadSuccess=function(t){var e=t.numPages;a.setState({numPages:e})},a.getPost=function(){var t=a.props.match.params.id;Z.a.find("posts",t,'filter={"include":"user"}').then(function(t){Z.a.findRelated("posts","topics",t.data.id).then(function(e){t.data.topics=e.data,a.setState({post:t.data})})}).catch(function(t){return console.log(t)})},a.upVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id});var e="where=".concat(JSON.stringify(t));t.upVote=!0,Z.a.create("votes/upsertWithWhere",t,e).then(function(t){a.setState({upvoted:!0,downvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})},a.deleteUpVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id}),t.upVote=!0,Z.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Z.a.destroy("votes",t.data[0].id).then(function(t){a.setState({upvoted:!1,downvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})}).catch(function(t){a.getVoteCount()})},a.deleteDownVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id}),t.upVote=!1,Z.a.find("votes",null,'filter={"where":'.concat(JSON.stringify(t),"}")).then(function(t){t.data.length&&Z.a.destroy("votes",t.data[0].id).then(function(t){a.setState({downvoted:!1,upvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})}).catch(function(t){a.getVoteCount()})},a.downVote=function(){var t={postId:a.props.match.params.id};$.a.getAuth(function(e,a){if(!a)return window.location.reload();t.userId=a.user.id});var e="where=".concat(JSON.stringify(t));t.upVote=!1,Z.a.create("votes/upsertWithWhere",t,e).then(function(t){a.setState({downvoted:!0,upvoted:!1}),a.getVoteCount()}).catch(function(t){a.getVoteCount()})},a.getVoteCount=function(){var t='filter={"where":{"postId":"'.concat(a.props.match.params.id,'"}}'),e=0;Z.a.find("votes",null,t).then(function(t){t.data.length||a.setState({voteCount:0}),t.data.map(function(t){t.upVote?e++:e--,a.setState({voteCount:e})})})},a.setVoteStatus=function(){var t=a.props.match.params.id;$.a.getAuth(function(e,n){if(!n)return window.location.reload();var o=n.user.id,i='filter={"where":{"userId":"'.concat(o,'","postId":"').concat(t,'"}}');Z.a.find("votes",null,i).then(function(t){t.data.length&&t.data[0]&&a.setState({upvoted:t.data[0].upVote,downvoted:!t.data[0].upVote})}).catch(function(t){return console.log(t)})})},a.saveToFavorite=function(){a.setState(function(t){return{favorited:!t.favorited}})},a.topicClicked=function(t){a.props.changeTitle(t),a.props.history.push("/"+t),a.props.onClick(t)},a.increasePageNumber=function(){a.setState(function(t){return{pageNumber:t.pageNumber+1<=t.numPages?t.pageNumber+1:t.numPages}})},a.decreasePageNumber=function(){a.setState(function(t){return{pageNumber:t.pageNumber-1>=1?t.pageNumber-1:1}})},a.handlePostClick=function(){},a.state={post:{},voteCount:0,upvoted:!1,downvoted:!1,numPages:null,pageNumber:1,favorited:!1},a}return Object(s.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.getPost(),this.getVoteCount(),this.setVoteStatus()}},{key:"render",value:function(){var t=this,e=this.props.classes,a=this.state,n=a.pageNumber,o=a.numPages;return l.a.createElement("div",{style:{alignContent:"center",alignItems:"center",justifyContent:"center",display:"flex",marginTop:"5%",marginBottom:"5%"}},l.a.createElement(m.a,{className:e.card},l.a.createElement(v.a,{avatar:l.a.createElement(y.a,{"aria-label":"Recipe",className:e.avatar},this.state.post&&this.state.post.user?this.state.post.user.firstname[0]:""),action:l.a.createElement(S.a,null,l.a.createElement(Q.a,null)),title:this.state.post.title?this.state.post.title:"",subheader:Y()(this.state.post?this.state.post.createdAt:"").format("HH:mm on MMM DD")+" by "+(this.state.post&&this.state.post.user?this.state.post.user.firstname:"")}),l.a.createElement(q.Document,{file:this.state.post?this.state.post.file:"",onLoadSuccess:this.onDocumentLoadSuccess},l.a.createElement(q.Page,{pageNumber:n,onClick:this.props.onClick})),l.a.createElement("p",{style:{float:"right",paddingRight:"100px"}},l.a.createElement(M.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:this.decreasePageNumber}),l.a.createElement(L.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:this.increasePageNumber}),l.a.createElement("br",null),"Page ",n," of ",o),l.a.createElement("br",null),l.a.createElement(w.a,{style:{marginTop:"10px"}},l.a.createElement(O.a,{component:"p"},this.state.post?this.state.post.description:""),l.a.createElement(B.a,{variant:"middle",className:e.divider}),l.a.createElement("br",null),this.state.post&&this.state.post.topic?this.state.post.topic.map(function(a,n){return l.a.createElement(z.a,{className:e.chip,key:a.id,label:a.name,color:"primary",variant:"outlined",onClick:function(){return t.topicClicked(a.name)}})}):""),l.a.createElement(C.a,{className:e.actions,disableActionSpacing:!0},l.a.createElement(S.a,{"aria-label":"vote count"},this.state.voteCount),l.a.createElement(S.a,{"aria-label":"Up vote ",onClick:this.state.upvoted?this.deleteUpVote:this.upVote,color:this.state.upvoted?"secondary":"inherit"},l.a.createElement(F.a,null)),l.a.createElement(S.a,{"aria-label":"Down vote ",onClick:this.state.downvoted?this.deleteDownVote:this.downVote,color:this.state.downvoted?"secondary":"inherit"},l.a.createElement(_.a,null)),l.a.createElement(S.a,{"aria-label":"Add to favorites",color:this.state.favorited?"secondary":"inherit",onClick:this.saveToFavorite},l.a.createElement(I.a,null)),l.a.createElement(S.a,{"aria-label":"Share"},l.a.createElement(T.a,null)),l.a.createElement(S.a,{className:f()(e.expand,Object(c.a)({},e.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"}))))}}]),e}(l.a.Component);e.default=Object(G.a)(Object(d.withStyles)(function(t){return{card:{minWidth:800,maxWidth:800},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:Object(c.a)({transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),marginLeft:"auto"},t.breakpoints.up("sm"),{marginRight:-8}),expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:x.a[500]},chip:{marginRight:t.spacing.unit},divider:{marginTop:t.spacing.unit,marginBottom:t.spacing.unit,marginRight:t.spacing.unit}}})(tt))}}]);
//# sourceMappingURL=3.75845d2c.chunk.js.map